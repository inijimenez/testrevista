"use strict";!function(e){function t(e,t,a){return e>=t&&e<a}function a(){var e=this.chaptersElement.querySelectorAll("[data-page]"),a=this.pageCount;return NIApi.page.getVisiblePages().then(function(n){if(n.length)for(var i,r,p,u,h,l=n[n.length-1],c=0;c<e.length;c++)i=e[c],r=e[c+1],p=parseInt(i.attributes["data-page"].value),u=r?parseInt(r.attributes["data-page"].value):a+1,h=t(l,p,u),h?i.classList.add(s):i.classList.remove(s)})}function n(){var e=parseInt(this.attributes["data-page"].value);NIApi.page.open(e)}function i(e){for(var t=e.querySelectorAll(".menu-item-chapters__tab[data-page]"),a=0;a<t.length;a++)t[a].addEventListener("click",n)}var s="menu-item-chapters__underline--active";e.Class.TemplateManager.addComponent("menuItem-chapters",function(t){t.isInThumbnail||(this.chaptersElement=this,NIApi.page.getCount().then(function(e){this.pageCount=e,a.apply(this)}.bind(this)),i(this.chaptersElement),NIApi.event.onPageChange(a.bind(this)),window.addEventListener(e.Param.eventResize,function(){window.setTimeout(a.bind(this),16)}.bind(this)))})}(webpublicationNamespace);